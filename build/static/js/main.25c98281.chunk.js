(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(17),c=t.n(r),o=t(8),u=t(3),a=t(2),i=t(0),l=function(e){var n=e.name,t=e.setNewName,r=e.phone,c=e.setNewPhone,o=e.handleSubmit;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:"Add a new entry"}),Object(i.jsxs)("form",{onSubmit:o,children:[Object(i.jsx)("label",{children:"Name:"}),Object(i.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}}),Object(i.jsx)("br",{}),Object(i.jsx)("label",{children:"Number:"}),Object(i.jsx)("input",{value:r,onChange:function(e){c(e.target.value)}}),Object(i.jsx)("br",{}),Object(i.jsx)("button",{type:"submit",children:"Add"})]})]})},s=function(e){var n=e.persons,t=e.filter,r=e.handleDelete,c=new RegExp(t,"i"),o=n.filter((function(e){return e.name.match(c)}));return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:"Numbers"}),Object(i.jsx)("ul",{children:o.map((function(e){return Object(i.jsxs)("li",{children:[e.name," ",e.number,Object(i.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(e.name,"?"))&&r(e.id)},children:"Delete"})]},e.id)}))})]})},d=function(e){var n=e.filter,t=e.setFilter;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("label",{children:"Filter shown containing "}),Object(i.jsx)("input",{value:n,onChange:function(e){return t(e.target.value)}}),Object(i.jsx)("br",{})]})},b=function(e){var n=e.info;if(null===n)return null;var t={color:n.color,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return Object(i.jsx)("p",{style:t,children:n.message})},j=t(4),f=t.n(j),h="/api/persons",m={getAll:function(){return f.a.get(h).then((function(e){return e.data}))},addNew:function(e){return f.a.post(h,e).then((function(e){return e.data}))},updateNumber:function(e,n){return f.a.put("".concat(h,"\\").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return f.a.delete("".concat(h,"\\").concat(e)).then((function(e){return e.data}))}},O=5e3,g=function(){var e=Object(a.useState)(""),n=Object(u.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),j=Object(u.a)(c,2),f=j[0],h=j[1],g=Object(a.useState)([]),p=Object(u.a)(g,2),x=p[0],v=p[1],w=Object(a.useState)(""),N=Object(u.a)(w,2),S=N[0],y=N[1],k=Object(a.useState)(null),D=Object(u.a)(k,2),F=D[0],A=D[1];Object(a.useEffect)((function(){m.getAll().then((function(e){v(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)(b,{info:F}),Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(d,{filter:S,setFilter:y}),Object(i.jsx)(l,{name:t,setNewName:r,handleSubmit:function(e){if(e.preventDefault(),void 0!==x.find((function(e){return e.name===t}))){if(window.confirm("".concat(t," is already added to the phonebook, replace the old number with a new one?"))){var n=x.find((function(e){return e.name===t})),c=Object(o.a)(Object(o.a)({},n),{},{number:f});m.updateNumber(n.id,c).then((function(e){console.log(e),v(x.map((function(n){return n.name===t?e:n}))),A({message:"Numer of ".concat(t," has been successfully changed"),color:"green"}),setTimeout((function(){return A(null)}),O)})).catch((function(e){A({message:"Information of ".concat(n.name," has already been deleted from the server"),color:"red"}),setTimeout((function(){return A(null)}),O)}))}}else{var u={name:t,number:f};m.addNew(u).then((function(e){v(x.concat(e)),A({message:"Added ".concat(t),color:"green"}),r(""),h(""),setTimeout((function(){return A(null)}),O)})).catch((function(e){return console.log(e)}))}},phone:f,setNewPhone:h}),Object(i.jsx)(s,{persons:x,filter:S,handleDelete:function(e){m.deletePerson(e).then((function(n){v(x.filter((function(n){return n.id!==e}))),A({message:"Deleted ".concat(x.find((function(n){return n.id===e})).name),color:"green"}),setTimeout((function(){return A(null)}),O)}))}})]})};c.a.render(Object(i.jsx)(g,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.25c98281.chunk.js.map